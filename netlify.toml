# QueRegalo - Netlify Configuration
# Esta configuración despliega Express + MongoDB en Netlify

[build]
  # Build command: solo instala dependencias
  # Netlify automáticamente ejecuta npm start (definido en Procfile)
  command = "cd server && npm install"
  # Publish: carpeta del frontend
  publish = "public"
  # No necesitas functions para esta arquitectura
  functions = "netlify/functions"

[dev]
  # Desarrollo local
  command = "npm start --prefix server"
  port = 3000

# Redirects para SPA (Single Page Application)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# IMPORTANTE: Los endpoints /api/* van directamente a Express
# No necesitan redirect porque Express está sirviendo todo
